import{a as ue,t as de,S as le,i as fe}from"./index.mABLSY0V.js";import{y as ge,O as me,P as we,Q as pe,s as he,R as M,S as ve,T as _e,U as ye,b as Oe,V as Ee,f as V,W as H,i as Ne,n as G,X}from"./scheduler.3akfCV0v.js";import{w as te,r as be}from"./index.0BhO-XAy.js";function et(e){return e?.length!==void 0?e:Array.from(e)}function Te(e,t){de(e,1,1,()=>{t.delete(e.key)})}function tt(e,t){e.f(),Te(e,t)}function nt(e,t,n,s,o,a,i,c,u,l,f,y){let d=e.length,h=a.length,p=d;const L={};for(;p--;)L[e[p].key]=p;const I=[],D=new Map,x=new Map,W=[];for(p=h;p--;){const g=y(o,a,p),v=n(g);let _=i.get(v);_?s&&W.push(()=>_.p(g,t)):(_=l(v,g),_.c()),D.set(v,I[p]=_),v in L&&x.set(v,Math.abs(p-L[v]))}const K=new Set,Y=new Set;function F(g){ue(g,1),g.m(c,f),i.set(g.key,g),f=g.first,h--}for(;d&&h;){const g=I[h-1],v=e[d-1],_=g.key,P=v.key;g===v?(f=g.first,d--,h--):D.has(P)?!i.has(_)||K.has(_)?F(g):Y.has(P)?d--:x.get(_)>x.get(P)?(Y.add(_),F(g)):(K.add(P),d--):(u(v,i),d--)}for(;d--;){const g=e[d];D.has(g.key)||u(g,i)}for(;h;)F(I[h-1]);return ge(W),I}function Se(e,t){const n={},s={},o={$$scope:1};let a=e.length;for(;a--;){const i=e[a],c=t[a];if(c){for(const u in i)u in c||(s[u]=1);for(const u in c)o[u]||(n[u]=c[u],o[u]=1);e[a]=c}else for(const u in i)o[u]=1}for(const i in s)i in n||(n[i]=void 0);return n}var m={},Re,Ie,Pe,Le,De;function w(e,t,n,s){return new(n||(n=Promise))(function(o,a){function i(l){try{u(s.next(l))}catch(f){a(f)}}function c(l){try{u(s.throw(l))}catch(f){a(f)}}function u(l){var f;l.done?o(l.value):(f=l.value,f instanceof n?f:new n(function(y){y(f)})).then(i,c)}u((s=s.apply(e,t||[])).next())})}function A(){return r("extensions.getStats")}Object.defineProperty(m,"__esModule",{value:!0});var xe=Object.freeze({__proto__:null,dispatch:function(e,t,n){return new Promise((s,o)=>w(this,void 0,void 0,function*(){let a=yield A();if(a.loaded.includes(e))if(a.connected.includes(e))try{let i=yield r("extensions.dispatch",{extensionId:e,event:t,data:n});s(i)}catch(i){o(i)}else(function(i,c){i in N?N[i].push(c):N[i]=[c]})(e,{method:"extensions.dispatch",data:{extensionId:e,event:t,data:n},resolve:s,reject:o});else o({code:"NE_EX_EXTNOTL",message:`${e} is not loaded`})}))},broadcast:function(e,t){return r("extensions.broadcast",{event:e,data:t})},getStats:A});function R(e,t){return window.addEventListener(e,t),Promise.resolve({success:!0,message:"Event listener added"})}function E(e,t){let n=new CustomEvent(e,{detail:t});return window.dispatchEvent(n),Promise.resolve({success:!0,message:"Message dispatched"})}function ne(e){let t=window.atob(e),n=t.length,s=new Uint8Array(n);for(let o=0;o<n;o++)s[o]=t.charCodeAt(o);return s.buffer}let O,S={},ie=[],N={};function Fe(){window.NL_TOKEN&&sessionStorage.setItem("NL_TOKEN",window.NL_TOKEN),O=new WebSocket(`ws://${window.location.hostname}:${window.NL_PORT}`),function(){R("ready",()=>w(this,void 0,void 0,function*(){if(yield Q(ie),!window.NL_EXTENABLED)return;let e=yield A();for(let t of e.connected)E("extensionReady",t)})),R("extClientConnect",e=>{E("extensionReady",e.detail)}),window.NL_EXTENABLED&&R("extensionReady",e=>w(this,void 0,void 0,function*(){e.detail in N&&(yield Q(N[e.detail]),delete N[e.detail])}))}(),function(){O.addEventListener("message",e=>{var t,n,s;const o=JSON.parse(e.data);o.id&&o.id in S?(!((t=o.data)===null||t===void 0)&&t.error?(S[o.id].reject(o.data.error),o.data.error.code=="NE_RT_INVTOKN"&&(O.close(),document.body.innerText="",document.write("<code>NE_RT_INVTOKN</code>: Neutralinojs application configuration prevents accepting native calls from this client."))):!((n=o.data)===null||n===void 0)&&n.success&&S[o.id].resolve(o.data.hasOwnProperty("returnValue")?o.data.returnValue:o.data),delete S[o.id]):o.event&&(o.event=="openedFile"&&((s=o?.data)===null||s===void 0?void 0:s.action)=="dataBinary"&&(o.data.data=ne(o.data.data)),E(o.event,o.data))}),O.addEventListener("open",e=>w(this,void 0,void 0,function*(){E("ready")})),O.addEventListener("close",e=>w(this,void 0,void 0,function*(){E("serverOffline",{code:"NE_CL_NSEROFF",message:"Neutralino server is offline. Try restarting the application"})}))}()}function r(e,t){return new Promise((n,s)=>{if(O?.readyState!=WebSocket.OPEN)return o={method:e,data:t,resolve:n,reject:s},void ie.push(o);var o;const a="10000000-1000-4000-8000-100000000000".replace(/[018]/g,c=>(c^crypto.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16)),i=window.NL_TOKEN||sessionStorage.getItem("NL_TOKEN")||"";S[a]={resolve:n,reject:s},O.send(JSON.stringify({id:a,method:e,data:t,accessToken:i}))})}function Q(e){return w(this,void 0,void 0,function*(){for(;e.length>0;){let t=e.shift();try{let n=yield r(t.method,t.data);t.resolve(n)}catch(n){t.reject(n)}}})}function oe(e,t){return r("filesystem.writeBinaryFile",{path:e,data:re(t)})}function re(e){let t=new Uint8Array(e),n="";for(let s of t)n+=String.fromCharCode(s);return window.btoa(n)}var j,z,Ce=Object.freeze({__proto__:null,createDirectory:function(e){return r("filesystem.createDirectory",{path:e})},removeDirectory:function(e){return r("filesystem.removeDirectory",{path:e})},writeFile:function(e,t){return r("filesystem.writeFile",{path:e,data:t})},appendFile:function(e,t){return r("filesystem.appendFile",{path:e,data:t})},writeBinaryFile:oe,appendBinaryFile:function(e,t){return r("filesystem.appendBinaryFile",{path:e,data:re(t)})},readFile:function(e,t){return r("filesystem.readFile",Object.assign({path:e},t))},readBinaryFile:function(e,t){return new Promise((n,s)=>{r("filesystem.readBinaryFile",Object.assign({path:e},t)).then(o=>{n(ne(o))}).catch(o=>{s(o)})})},openFile:function(e){return r("filesystem.openFile",{path:e})},createWatcher:function(e){return r("filesystem.createWatcher",{path:e})},removeWatcher:function(e){return r("filesystem.removeWatcher",{id:e})},getWatchers:function(){return r("filesystem.getWatchers")},updateOpenedFile:function(e,t,n){return r("filesystem.updateOpenedFile",{id:e,event:t,data:n})},getOpenedFileInfo:function(e){return r("filesystem.getOpenedFileInfo",{id:e})},removeFile:function(e){return r("filesystem.removeFile",{path:e})},readDirectory:function(e){return r("filesystem.readDirectory",{path:e})},copyFile:function(e,t){return r("filesystem.copyFile",{source:e,destination:t})},moveFile:function(e,t){return r("filesystem.moveFile",{source:e,destination:t})},getStats:function(e){return r("filesystem.getStats",{path:e})}});function k(e,t){return r("os.execCommand",Object.assign({command:e},t))}(function(e){e.WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO",e.QUESTION="QUESTION"})(j||(j={})),function(e){e.OK="OK",e.OK_CANCEL="OK_CANCEL",e.YES_NO="YES_NO",e.YES_NO_CANCEL="YES_NO_CANCEL",e.RETRY_CANCEL="RETRY_CANCEL",e.ABORT_RETRY_IGNORE="ABORT_RETRY_IGNORE"}(z||(z={}));var Me=Object.freeze({__proto__:null,get Icon(){return j},get MessageBoxChoice(){return z},execCommand:k,spawnProcess:function(e,t){return r("os.spawnProcess",{command:e,cwd:t})},updateSpawnedProcess:function(e,t,n){return r("os.updateSpawnedProcess",{id:e,event:t,data:n})},getSpawnedProcesses:function(){return r("os.getSpawnedProcesses")},getEnv:function(e){return r("os.getEnv",{key:e})},getEnvs:function(){return r("os.getEnvs")},showOpenDialog:function(e,t){return r("os.showOpenDialog",Object.assign({title:e},t))},showFolderDialog:function(e,t){return r("os.showFolderDialog",Object.assign({title:e},t))},showSaveDialog:function(e,t){return r("os.showSaveDialog",Object.assign({title:e},t))},showNotification:function(e,t,n){return r("os.showNotification",{title:e,content:t,icon:n})},showMessageBox:function(e,t,n,s){return r("os.showMessageBox",{title:e,content:t,choice:n,icon:s})},setTray:function(e){return r("os.setTray",e)},open:function(e){return r("os.open",{url:e})},getPath:function(e){return r("os.getPath",{name:e})}}),Ae=Object.freeze({__proto__:null,getMemoryInfo:function(){return r("computer.getMemoryInfo")},getArch:function(){return r("computer.getArch")},getKernelInfo:function(){return r("computer.getKernelInfo")},getOSInfo:function(){return r("computer.getOSInfo")},getCPUInfo:function(){return r("computer.getCPUInfo")},getDisplays:function(){return r("computer.getDisplays")},getMousePosition:function(){return r("computer.getMousePosition")}}),U,je=Object.freeze({__proto__:null,setData:function(e,t){return r("storage.setData",{key:e,data:t})},getData:function(e){return r("storage.getData",{key:e})},getKeys:function(){return r("storage.getKeys")}});function se(e,t){return r("debug.log",{message:e,type:t})}(function(e){e.WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO"})(U||(U={}));var ze=Object.freeze({__proto__:null,get LoggerType(){return U},log:se});function q(e){return r("app.exit",{code:e})}var Ue=Object.freeze({__proto__:null,exit:q,killProcess:function(){return r("app.killProcess")},restartProcess:function(e){return new Promise(t=>w(this,void 0,void 0,function*(){let n=window.NL_ARGS.reduce((s,o)=>(o.includes(" ")&&(o=`"${o}"`),s+=" "+o),"");e?.args&&(n+=" "+e.args),yield k(n,{background:!0}),q(),t()}))},getConfig:function(){return r("app.getConfig")},broadcast:function(e,t){return r("app.broadcast",{event:e,data:t})}});const b=new WeakMap;function J(e,t){return r("window.move",{x:e,y:t})}function $(){return r("window.getSize")}var ke=Object.freeze({__proto__:null,setTitle:function(e){return r("window.setTitle",{title:e})},getTitle:function(){return r("window.getTitle")},maximize:function(){return r("window.maximize")},unmaximize:function(){return r("window.unmaximize")},isMaximized:function(){return r("window.isMaximized")},minimize:function(){return r("window.minimize")},setFullScreen:function(){return r("window.setFullScreen")},exitFullScreen:function(){return r("window.exitFullScreen")},isFullScreen:function(){return r("window.isFullScreen")},show:function(){return r("window.show")},hide:function(){return r("window.hide")},isVisible:function(){return r("window.isVisible")},focus:function(){return r("window.focus")},setIcon:function(e){return r("window.setIcon",{icon:e})},move:J,center:function(){return r("window.center")},setDraggableRegion:function(e){return new Promise((t,n)=>{const s=e instanceof Element?e:document.getElementById(e);let o=0,a=0,i=0,c=!1,u=performance.now();if(!s)return n({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(b.has(s))return n({code:"NE_WD_ALRDREL",message:"This DOM element is already an active draggable region"});function l(d){return w(this,void 0,void 0,function*(){if(c){const h=performance.now(),p=h-u;return p<5?void 0:(u=h-(p-5),void(yield J(d.screenX-o,d.screenY-a)))}i=Math.sqrt(d.movementX*d.movementX+d.movementY*d.movementY),i>=10&&(c=!0,s.setPointerCapture(d.pointerId))})}function f(d){d.button===0&&(o=d.clientX,a=d.clientY,s.addEventListener("pointermove",l))}function y(d){s.removeEventListener("pointermove",l),s.releasePointerCapture(d.pointerId)}s.addEventListener("pointerdown",f),s.addEventListener("pointerup",y),b.set(s,{pointerdown:f,pointerup:y}),t({success:!0,message:"Draggable region was activated"})})},unsetDraggableRegion:function(e){return new Promise((t,n)=>{const s=e instanceof Element?e:document.getElementById(e);if(!s)return n({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(!b.has(s))return n({code:"NE_WD_NOTDRRE",message:"DOM element is not an active draggable region"});const{pointerdown:o,pointerup:a}=b.get(s);s.removeEventListener("pointerdown",o),s.removeEventListener("pointerup",a),b.delete(s),t({success:!0,message:"Draggable region was deactivated"})})},setSize:function(e){return new Promise((t,n)=>w(this,void 0,void 0,function*(){let s=yield $();r("window.setSize",e=Object.assign(Object.assign({},s),e)).then(o=>{t(o)}).catch(o=>{n(o)})}))},getSize:$,getPosition:function(){return r("window.getPosition")},setAlwaysOnTop:function(e){return r("window.setAlwaysOnTop",{onTop:e})},create:function(e,t){return new Promise((n,s)=>{function o(i){return typeof i!="string"||(i=i.trim()).includes(" ")&&(i=`"${i}"`),i}t=Object.assign(Object.assign({},t),{useSavedState:!1});let a=window.NL_ARGS.reduce((i,c,u)=>((c.includes("--path=")||c.includes("--debug-mode")||c.includes("--load-dir-res")||u==0)&&(i+=" "+o(c)),i),"");a+=" --url="+o(e);for(let i in t)i!="processArgs"&&(a+=` --window${i.replace(/[A-Z]|^[a-z]/g,c=>"-"+c.toLowerCase())}=${o(t[i])}`);t&&t.processArgs&&(a+=" "+t.processArgs),k(a,{background:!0}).then(i=>{n(i)}).catch(i=>{s(i)})})}}),Be=Object.freeze({__proto__:null,broadcast:function(e,t){return r("events.broadcast",{event:e,data:t})},on:R,off:function(e,t){return window.removeEventListener(e,t),Promise.resolve({success:!0,message:"Event listener removed"})},dispatch:E});let T=null;var We=Object.freeze({__proto__:null,checkForUpdates:function(e){return new Promise((t,n)=>w(this,void 0,void 0,function*(){if(!e)return n({code:"NE_RT_NATRTER",message:"Missing require parameter: url"});try{let s=yield fetch(e);T=JSON.parse(yield s.text()),function(o){return!!(o.applicationId&&o.applicationId==window.NL_APPID&&o.version&&o.resourcesURL)}(T)?t(T):n({code:"NE_UP_CUPDMER",message:"Invalid update manifest or mismatching applicationId"})}catch{n({code:"NE_UP_CUPDERR",message:"Unable to fetch update manifest"})}}))},install:function(){return new Promise((e,t)=>w(this,void 0,void 0,function*(){if(!T)return t({code:"NE_UP_UPDNOUF",message:"No update manifest loaded"});try{let n=yield fetch(T.resourcesURL),s=yield n.arrayBuffer();yield oe(window.NL_PATH+"/resources.neu",s),e({success:!0,message:"Update installed. Restart the process to see updates"})}catch{t({code:"NE_UP_UPDINER",message:"Update installation error"})}}))}}),Ke=Object.freeze({__proto__:null,readText:function(e,t){return r("clipboard.readText",{key:e,data:t})},writeText:function(e){return r("clipboard.writeText",{data:e})}}),Ye=Object.freeze({__proto__:null,getMethods:function(){return r("custom.getMethods")}});let Z=!1;De=m.app=Ue,m.clipboard=Ke,m.computer=Ae,m.custom=Ye,m.debug=ze,m.events=Be,m.extensions=xe,Le=m.filesystem=Ce,Pe=m.init=function(e={}){if(e=Object.assign({exportCustomMethods:!0},e),!Z){if(Fe(),window.NL_ARGS.find(t=>t=="--neu-dev-auto-reload")&&R("neuDev_reloadApp",()=>w(this,void 0,void 0,function*(){yield se("Reloading the application..."),location.reload()})),e.exportCustomMethods&&window.NL_CMETHODS&&window.NL_CMETHODS.length>0)for(let t of window.NL_CMETHODS)Neutralino.custom[t]=(...n)=>{let s={};for(let[o,a]of n.entries())s=typeof a!="object"||Array.isArray(a)||a==null?Object.assign(Object.assign({},s),{["arg"+o]:a}):Object.assign(Object.assign({},s),a);return r("custom."+t,s)};window.NL_CVERSION="3.13.0",window.NL_CCOMMIT="26e9ccc7986db4fb7df7041ea7c90b3d2ed1093e",Z=!0}},Ie=m.os=Me,m.storage=je,m.updater=We,Re=m.window=ke;const Ve={message:"Missing Toast Message",autohide:!0,timeout:5e3},ae="toastStore";function it(){const e=we(ae);if(!e)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function ot(){const e=Ge();return me(ae,e)}function He(){const e=Math.random();return Number(e).toString(32)}function Ge(){const{subscribe:e,set:t,update:n}=te([]),s=a=>n(i=>{if(i.length>0){const c=i.findIndex(l=>l.id===a),u=i[c];u&&(u.callback&&u.callback({id:a,status:"closed"}),u.timeoutId&&clearTimeout(u.timeoutId),i.splice(c,1))}return i});function o(a){if(a.autohide===!0)return setTimeout(()=>{s(a.id)},a.timeout)}return{subscribe:e,close:s,trigger:a=>{const i=He();return n(c=>{a&&a.callback&&a.callback({id:i,status:"queued"}),a.hideDismiss&&(a.autohide=!0);const u={...Ve,...a,id:i};return u.timeoutId=o(u),c.push(u),c}),i},freeze:a=>n(i=>(i.length>0&&clearTimeout(i[a].timeoutId),i)),unfreeze:a=>n(i=>(i.length>0&&(i[a].timeoutId=o(i[a])),i)),clear:()=>t([])}}const C={};function ee(e){return e==="local"?localStorage:sessionStorage}function B(e,t,n){const s=n?.serializer??JSON,o=n?.storage??"local";function a(i,c){ee(o).setItem(i,s.stringify(c))}if(!C[e]){const i=te(t,l=>{const f=ee(o).getItem(e);f&&l(s.parse(f));{const y=d=>{d.key===e&&l(d.newValue?s.parse(d.newValue):null)};return window.addEventListener("storage",y),()=>window.removeEventListener("storage",y)}}),{subscribe:c,set:u}=i;C[e]={set(l){a(e,l),u(l)},update(l){const f=l(pe(i));a(e,f),u(f)},subscribe:c}}return C[e]}B("modeOsPrefers",!1);B("modeUserPrefers",void 0);B("modeCurrent",!1);const ce="(prefers-reduced-motion: reduce)";function Xe(){return window.matchMedia(ce).matches}const rt=be(Xe(),e=>{{const t=s=>{e(s.matches)},n=window.matchMedia(ce);return n.addEventListener("change",t),()=>{n.removeEventListener("change",t)}}});function Qe(e){let t,n,s='<path fill="currentColor" d="M22 4h-8l-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2M2 6H0v14a2 2 0 0 0 2 2h18v-2H2z"/>',o=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},e[0]],a={};for(let i=0;i<o.length;i+=1)a=M(a,o[i]);return{c(){t=ve("svg"),n=new _e(!0),this.h()},l(i){t=ye(i,"svg",{viewBox:!0,width:!0,height:!0});var c=Oe(t);n=Ee(c,!0),c.forEach(V),this.h()},h(){n.a=null,H(t,a)},m(i,c){Ne(i,t,c),n.m(s,t)},p(i,[c]){H(t,a=Se(o,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},c&1&&i[0]]))},i:G,o:G,d(i){i&&V(t)}}}function qe(e,t,n){return e.$$set=s=>{n(0,t=M(M({},t),X(s)))},t=X(t),[t]}class st extends le{constructor(t){super(),fe(this,t,qe,Qe,he,{})}}export{st as F,it as a,tt as b,De as c,Pe as d,et as e,Le as f,Se as g,ot as i,Ie as o,rt as p,nt as u,Re as w};
